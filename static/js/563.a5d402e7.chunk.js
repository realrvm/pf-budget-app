"use strict";(self.webpackChunkpf_budget_app=self.webpackChunkpf_budget_app||[]).push([[563],{563:function(e,n,r){r.r(n),r.d(n,{default:function(){return y}});var t=r(885),i=r(791),s=r(144),a=r(593),l=r(266),o=r(157),c=r(418),d=r(184),u=function(e){var n=e.name,r=e.amount,t=e.max,i=e.onAddExpenseClick,u=e.onViewExpenseClick,x=e.hideButtons;return(0,d.jsx)(s.Z,{className:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r="bg-danger",t="bg-light",i="bg-opacity-10";return n&&e>n?"".concat(r," ").concat(i):t}(r,t),children:(0,d.jsxs)(s.Z.Body,{children:[(0,d.jsxs)(s.Z.Title,{className:"d-flex justify-content-berween align-items-baseline fw-normal mb-3",children:[(0,d.jsx)("div",{className:"me-2",children:n}),(0,d.jsxs)("div",{className:"d-flex align-items-baseline ms-auto",children:[c.mp.format(r),t&&"/ "," ",t&&(0,d.jsx)("span",{className:"text-muted fs-6 ms-1",children:c.mp.format(t)})]})]}),t&&(0,d.jsx)(a.Z,{className:"rounded-pill",variant:function(e,n){var r=e/n;return r<.5?"primary":r<.75?"warning":"danger"}(r,t),min:0,max:t,now:r}),!x&&(0,d.jsxs)(l.Z,{direction:"horizontal",gap:2,className:"mt-4",children:[(0,d.jsx)(o.Z,{variant:"outline-primary",className:"ms-auto",onClick:i,children:"\u041f\u043e\u0442\u0440\u0430\u0442\u0438\u0442\u044c"}),(0,d.jsx)(o.Z,{variant:"outline-secondary",onClick:u,children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})]})]})})},x=r(434),m=r(437),h=r(494),j=function(){return(0,i.useContext)(h.I)},f=function(e){var n=e.show,r=e.handleClose,t=j().addBudget,s=(0,i.useRef)({}),a=(0,i.useRef)({});return(0,d.jsx)(x.Z,{show:n,onHide:r,children:(0,d.jsxs)(m.Z,{onSubmit:function(e){e.preventDefault(),t({name:s.current.value,max:parseInt(a.current.value)}),r()},children:[(0,d.jsx)(x.Z.Header,{closeButton:!0,children:(0,d.jsx)(x.Z.Title,{children:"\u041d\u043e\u0432\u0430\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"})}),(0,d.jsxs)(x.Z.Body,{children:[(0,d.jsxs)(m.Z.Group,{className:"mb-3",controlId:"name",children:[(0,d.jsx)(m.Z.Label,{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,d.jsx)(m.Z.Control,{ref:s,type:"text",required:!0})]}),(0,d.jsxs)(m.Z.Group,{className:"mb-3",controlId:"maximum",children:[(0,d.jsx)(m.Z.Label,{children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u0430\u0442\u0440\u0430\u0442\u044b"}),(0,d.jsx)(m.Z.Control,{ref:a,type:"number",required:!0,min:0,step:10})]}),(0,d.jsx)("div",{className:"d-flex justify-content-end",children:(0,d.jsx)(o.Z,{variant:"primary",type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})})},p=function(e){var n=e.show,r=e.handleClose,t=e.defaultCurrentId,s=j(),a=s.budgets,l=s.setExpense,u=(0,i.useRef)({}),h=(0,i.useRef)({}),f=(0,i.useRef)({});return(0,d.jsx)(x.Z,{show:n,onHide:r,children:(0,d.jsxs)(m.Z,{onSubmit:function(e){e.preventDefault(),l({description:u.current.value,amount:parseInt(h.current.value),currentId:f.current.value}),r()},children:[(0,d.jsx)(x.Z.Header,{closeButton:!0,children:(0,d.jsx)(x.Z.Title,{children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"})}),(0,d.jsxs)(x.Z.Body,{children:[(0,d.jsxs)(m.Z.Group,{className:"mb-3",controlId:"description",children:[(0,d.jsx)(m.Z.Label,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,d.jsx)(m.Z.Control,{ref:u,type:"text",required:!0})]}),(0,d.jsxs)(m.Z.Group,{className:"mb-3",controlId:"amount",children:[(0,d.jsx)(m.Z.Label,{children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),(0,d.jsx)(m.Z.Control,{ref:h,type:"text",required:!0})]}),(0,d.jsxs)(m.Z.Group,{className:"mb-3",controlId:"currentId",children:[(0,d.jsx)(m.Z.Label,{children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432"}),(0,d.jsxs)(m.Z.Select,{defaultValue:t,ref:f,children:[(0,d.jsx)("option",{children:c.IY}),a.map((function(e){var n=e.id,r=e.name;return(0,d.jsx)("option",{value:n,children:r},n)}))]})]}),(0,d.jsx)("div",{className:"d-flex justify-content-end",children:(0,d.jsx)(o.Z,{variant:"primary",type:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})]})})},Z=function(e){var n=e.currentId,r=e.handleClose,t=j(),i=t.budgets,s=t.getExpense,a=t.deleteBudget,u=t.deleteExpense,m=s(n),h=c.IY===n?{name:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",id:c.IY}:i.find((function(e){return e.id===n}));return(0,d.jsxs)(x.Z,{show:(null===n||void 0===n?void 0:n.length)>0,onHide:r,children:[(0,d.jsx)(x.Z.Header,{closeButton:!0,children:(0,d.jsx)(x.Z.Title,{children:(0,d.jsxs)(l.Z,{direction:"horizontal",gap:2,children:[(0,d.jsxs)("div",{children:["\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f - ",null===h||void 0===h?void 0:h.name]}),n!==c.IY&&(0,d.jsx)(o.Z,{variant:"outline-danger",onClick:function(){h&&a(h.id),r()},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"})]})})}),(0,d.jsx)(x.Z.Body,{children:(0,d.jsx)(l.Z,{gap:3,children:m.map((function(e){var n=e.id,r=e.description,t=e.amount;return(0,d.jsxs)(l.Z,{direction:"horizontal",gap:2,children:[(0,d.jsx)("div",{className:"me-auto fs-4",children:r}),(0,d.jsx)("div",{className:"fs-5",children:t&&c.mp.format(t)}),(0,d.jsx)(o.Z,{size:"sm",variant:"outline-danger",onClick:function(){return u(n)},children:"\xd7"})]},n)}))})})]})},v=function(){var e=j(),n=e.expenses,r=e.budgets,t=n.reduce((function(e,n){var r=n.amount;return void 0===r?0:e+r}),0),i=r.reduce((function(e,n){var r=n.max;return void 0===r?0:e+r}),0);return 0===i?null:(0,d.jsx)(u,{amount:t,name:"\u0412\u0441\u0435\u0433\u043e",max:i,hideButtons:!0})},C=function(e){var n=e.onAddExpenseClick,r=e.onViewExpenseClick,t=(0,j().getExpense)(c.IY).reduce((function(e,n){var r=n.amount;return void 0===r?0:e+r}),0);return 0===t?null:(0,d.jsx)(u,{amount:t,name:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",onAddExpenseClick:n,onViewExpenseClick:r})},g=function(e){var n=e.show,r=e.handleClose,t=j().removeEvthgFromLocaleStorage;return(0,d.jsxs)(x.Z,{show:n,onHide:r,children:[(0,d.jsx)(x.Z.Header,{closeButton:!0,children:(0,d.jsx)(x.Z.Title,{children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0451"})}),(0,d.jsxs)(x.Z.Body,{children:[(0,d.jsx)("div",{className:"mb-4",children:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0437\u0430\u043f\u0438\u0441\u0438? \u042d\u0442\u043e \u0431\u0438\u043b\u0435\u0442 \u0432 \u043e\u0434\u0438\u043d \u043a\u043e\u043d\u0435\u0446 \ud83d\ude00."}),(0,d.jsxs)(l.Z,{direction:"horizontal",gap:2,className:"d-flex justify-content-end",children:[(0,d.jsx)(o.Z,{variant:"primary",onClick:function(){t(),r()},children:"\u0414\u0430, \u043a\u043e\u043d\u0435\u0447\u043d\u043e!"}),(0,d.jsx)(o.Z,{variant:"outline-secondary",onClick:r,children:"\u042f \u043f\u0435\u0440\u0435\u0434\u0443\u043c\u0430\u043b."})]})]})]})},b=r(22),y=function(){var e=(0,i.useState)(!1),n=(0,t.Z)(e,2),r=n[0],s=n[1],a=(0,i.useState)(!1),x=(0,t.Z)(a,2),m=x[0],h=x[1],y=(0,i.useState)(!1),k=(0,t.Z)(y,2),N=k[0],w=k[1],I=(0,i.useState)(""),E=(0,t.Z)(I,2),B=E[0],S=E[1],H=(0,i.useState)(""),z=(0,t.Z)(H,2),L=z[0],V=z[1],Y=j(),A=Y.budgets,G=Y.getExpense;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(b.Z,{className:"my-4",children:[(0,d.jsxs)(l.Z,{direction:"horizontal",gap:2,className:"mb-4",children:[(0,d.jsx)("h1",{className:"me-auto",children:"\u0411\u044e\u0434\u0436\u0435\u0442"}),(0,d.jsx)(o.Z,{variant:"primary",onClick:function(){return s(!0)},children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"}),(0,d.jsx)(o.Z,{variant:"outline-primary",onClick:function(){return h(!0)},children:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b"}),(0,d.jsx)(o.Z,{variant:"outline-danger",onClick:function(){return w(!0)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0451"})]}),(0,d.jsxs)("div",{className:"app-content",children:[A.map((function(e){var n=e.id,r=e.name,t=e.max,i=G(n).reduce((function(e,n){return void 0===n.amount?0:e+n.amount}),0);return(0,d.jsx)(u,{name:r,amount:i,max:t,onAddExpenseClick:function(){return e=n,h(!0),void S(e);var e},onViewExpenseClick:function(){return V(n)}},n)})),(0,d.jsx)(C,{onAddExpenseClick:function(){h(!0)},onViewExpenseClick:function(){return V(c.IY)}}),(0,d.jsx)(v,{})]})]}),(0,d.jsx)(f,{show:r,handleClose:function(){return s(!1)}}),(0,d.jsx)(g,{show:N,handleClose:function(){return w(!1)}}),(0,d.jsx)(p,{show:m,handleClose:function(){return h(!1)},defaultCurrentId:B}),(0,d.jsx)(Z,{currentId:L,handleClose:function(){return V("")}})]})}}}]);
//# sourceMappingURL=563.a5d402e7.chunk.js.map